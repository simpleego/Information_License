# DB 함수, 스토어프로시저, 트리거 차이점

---

# 🟦 1. Stored Procedure (저장 프로시저)
### ✔ “개발자가 직접 호출해서 실행하는 SQL 묶음”
- 일종의 **서버 측 스크립트**  
- 여러 SQL을 하나의 함수처럼 묶어둔 것  
- **반드시 누군가가 호출해야 실행됨**  
  - 개발자 코드에서 호출  
  - 다른 프로시저에서 호출  
  - 스케줄러에서 호출

### ✔ 언제 쓰나?
- 반복되는 작업 자동화  
- 대량 데이터 처리  
- 배치 작업  
- 복잡한 비즈니스 로직

### ✔ 예시
```sql
CALL update_salary();
```

---

# 🟩 2. Trigger (트리거)
### ✔ “DB에서 특정 이벤트가 발생하면 자동 실행되는 SQL”
- **INSERT / UPDATE / DELETE** 같은 이벤트가 발생할 때 자동 실행  
- 개발자가 직접 호출하지 않음  
- 테이블에 붙어 있는 자동 반응 장치

### ✔ 언제 쓰나?
- 로그 기록 자동화  
- 데이터 무결성 유지  
- 변경 이력 저장  
- 특정 조건에서 자동 계산

### ✔ 예시
```sql
CREATE TRIGGER log_update
AFTER UPDATE ON employee
FOR EACH ROW
INSERT INTO log_table VALUES (...);
```

---

# 🟧 3. Function (함수, UDF)
### ✔ “값을 반환하는 SQL 함수”
- SELECT 문 안에서 호출 가능  
- 반드시 **값을 반환(return)**  
- 부작용(side-effect)이 없어야 함 (DB 변경 X)

### ✔ 언제 쓰나?
- 계산 로직  
- 문자열/숫자 처리  
- SELECT 문에서 재사용되는 로직

### ✔ 예시
```sql
SELECT get_age(birthdate) FROM users;
```

---

# 🟥 4. 핵심 차이 한눈에 비교

| 구분 | 프로시저 (Procedure) | 트리거 (Trigger) | 함수 (Function) |
|------|----------------------|------------------|------------------|
| 실행 방식 | **개발자가 직접 호출** | **DB 이벤트 발생 시 자동 실행** | SELECT 등에서 **호출** |
| 반환값 | 있어도 되고 없어도 됨 | 없음 | **반드시 1개 반환** |
| 사용 목적 | 비즈니스 로직, 배치 | 자동화, 무결성 | 계산, 변환 |
| DB 변경 | 가능 | 가능 | **불가(권장)** |
| 호출 위치 | 코드, 스케줄러 | 테이블 이벤트 | SELECT, WHERE 등 |

---

# 🎯 jong이 이해하기 쉽게 비유하면

- **프로시저** = “내가 버튼 눌러야 실행되는 기계”  
- **트리거** = “센서가 감지되면 자동으로 작동하는 기계”  
- **함수** = “입력 넣으면 결과만 딱 반환하는 계산기”

